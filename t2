 kubcetl create -f elastic-curator-configmap.yaml -n logging
  988  kubectl create -f elastic-curator-configmap.yaml -n logging
  989  kubectl create -f elastic-curator.yaml -n logging
  990  kubectl create -f elastic-svc.yaml -n logging
  991  kubectl get pods,svc -n logging
  992  kubectl get pods -n logging
  993  kubectl delete -f elastic-svc.yaml -n logging
  994  kubectl delete -f elastic-curator.yaml -n logging
  995  kubectl delete -f elastic-curator-configmap.yaml -n logging
  996  ls
  997  cd ../fluentd/
  998  ls
  999  vim fluentd-rbac.yaml
 1000  vim fluentd-bit-client.yaml
 1001  sudo -i
 1002  cd /devops/loggingv3/scripts/
 1003  ls
 1004  cd new2/
 1005  ls
 1006  cd kubernetes-efk/
 1007  ls
 1008  cd elasticsearch/
 1009  ls
 1010  sudo vim elastic-statefulset.yaml
 1011  kubectl get node
 1012  kubectl describe node awsnlkub034.amwaternp.net | less
 1013  df -h
 1014  free -m
 1015  sudo vim elastic-statefulset.yaml
 1016  mkdir /backups/elk-data
 1017  sudo mkdir /backups/elk-data
 1018  sudo vim elastic-statefulset.yaml
 1019  hostnamectl
 1020  kubectl get node | grep -i awsnlkub034.amwaternp.net
 1021  sudo vim elastic-statefulset.yaml
 1022  kubectl describe node awsnlkub034.amwaternp.net | less
 1023  kubectl get pod -n logging
 1024  kubectl create -f elastic-statefulset.yaml -n logging
 1025  kubectl get pod -n logging
 1026  kubectl logs -f elasticsearch-0 -n logging
 1027  sudo vim elastic-statefulset.yaml
 1028  cd /backups/elk-data/
 1029  cd -
 1030  ls -la /backups/elk-data
 1031  ls -lad /backups/elk-data
 1032  id
 1033  rmdir /backups/elk-data/
 1034  sudo  rmdir /backups/elk-data/
 1035  ls -lad /backups/elk-data
 1036  kubectl delete -f elastic-statefulset.yaml -n logging
 1037  kubectl get pod -n logging
 1038  kubectl create -f elastic-statefulset.yaml -n logging
 1039  kubectl get pod -n logging
 1040  kubectl logs -f elasticsearch-0 -n logging
 1041  ls -lad /backups/elk-data
 1042  ls -lad /backups/elk-data e
 1043  ls -lad /backups/elk-data/
 1044  ls -la /backups/elk-data/
 1045  which kubectl
 1046  kubectl delete -f elastic-statefulset.yaml -n logging
 1047  sudo vim elastic-statefulset.yaml
 1048  kubectl get pod -n logging
 1049  kubectl create -f elastic-statefulset.yaml -n logging
 1050  kubectl get pod -n logging
 1051  kubectl logs -f elasticsearch-0 -n logging
 1052  kubectl get pod -n logging
 1053  kubectl exec -ti elasticsearch-0 -- id -n logging
 1054  kubectl get pod -n logging
 1055  kubectl exec -ti elasticsearch-0 -- id -n logging
 1056  kubectl -n logging exec -ti elasticsearch-0 -- id
 1057  kubectl -n logging exec -ti "elasticsearch-0" -- id
 1058  kubectl -n logging exec -ti "elasticsearch-0" -- df -h
 1059  kubectl -n logging exec -ti "elasticsearch-0" -- df
 1060  kubectl get pod -n logging
 1061  kubectl delete  pod elasticsearch-0 -n logging
 1062  kubectl get pod -n logging
 1063  kubectl -n logging exec -ti "elasticsearch-0" -- df
 1064  kubectl -n logging exec -ti "elasticsearch-0" -- df  -h
 1065  kubectl get pod -n logging
 1066  sudo vim elastic-statefulset.yaml
 1067  kubectl -n logging exec -ti "elasticsearch-0" -- ls -lad /usr/share/elasticsearch/data
 1068  kubectl get pod -n logging
 1069  kubectl -n logging exec -ti "elasticsearch-0" -- ls -lad /usr/share/elasticsearch/data
 1070  w
 1071  kubectl get pod -n logging
 1072  sudo vim elastic-statefulset.yaml
 1073  kubectl delete -f elastic-statefulset.yaml -n logging
 1074  kubectl create -f elastic-statefulset.yaml -n logging
 1075  ls -la /backups/elk-data/
 1076  rmdir /backups/elk-data/
 1077  sudo  rmdir /backups/elk-data/
 1078  ls -la /tmp/elk-data/
 1079  kubectl get pod -n logging
 1080  kubectl logs -f elasticsearch-0 -n logging
 1081  kubectl get pod -n logging
 1082  history
 1083  kubectl delete -f elastic-statefulset.yaml -n logging
 1084  ls -la /tmp/elk-data/
 1085  sudo  chown 1000:1000 /tmp/elk-data/
 1086  ls -la /tmp/elk-data/
 1087  kubectl get pod -n logging
 1088  kubectl create -f elastic-statefulset.yaml -n logging
 1089  kubectl get pod -n logging
 1090  kubectl logs -f elasticsearch-0 -n logging
 1091  kubectl get svc -n default
 1092  kubectl get svc -n kube-system
 1093  kubectl get pod -n kube-system
 1094  kubectl -n kube-system exec -ti kubernetes-dashboard-59c8657f84-qlr4l -- cat /etc/resolv.conf
 1095  kubectl -n kube-system exec -ti kubernetes-dashboard-59c8657f84-qlr4l -- /bin/cat /etc/resolv.conf
 1096  which cat
 1097  kubectl -n kube-system exec -ti kubernetes-dashboard-59c8657f84-qlr4l -- /usr/bin/cat /etc/resolv.conf
 1098  kubectl -n kube-system exec -ti kubernetes-dashboard-59c8657f84-qlr4l -- sh
 1099  kubectl -n kube-system exec -ti kubernetes-dashboard-59c8657f84-qlr4l -- bash
 1100  kubectl get pod -n kube-system
 1101  kubectl get pod -n kube-system -o wide
 1102  kubectl -n kube-system exec -ti heapster-6d4f84fdf8-p4v58 -- bash
 1103  kubectl -n kube-system exec -ti heapster-6d4f84fdf8-p4v58 -- sh
 1104  kubectl -n kube-system exec -ti kube-dns-fbf6ff8fb-tfwpr -- sh
 1105  sudo vim elastic-statefulset.yaml
 1106  kubectl delete -f elastic-statefulset.yaml -n logging
 1107  ls -la /tmp/elk-data/
 1108  sudo  rm -fr  /tmp/elk-data/nodes/
 1109  ls -la /tmp/elk-data/
 1110  kubectl create -f elastic-statefulset.yaml -n logging
 1111  ls -la
 1112  sudo vim elastic-svc.yaml
 1113  kubectl get pod -n kube-system -o wide
 1114  kubectl get pod -n llogging
 1115  kubectl get pod -n logging
 1116  kubectl logs -f elasticsearch-0 -n logging
 1117  kubectl create -f elastic-svc.yaml -n logging
 1118  kubectl get pod,svc -n logging
 1119  kubectl get pod,svc,ep -n logging
 1120  curl -kv 192.168.119.255:9200
 1121  ls -la
 1122  cd ../fluentd/
 1123  ls
 1124  ls -la
 1125  less fluentd-server.yaml
 1126  kubectl create -f fluentd-server.yaml -n loggin
 1127  sudo vim elastic-svc.yaml
 1128  ls
 1129  vim fluentd-rbac.yaml
 1130  sudo vim fluentd-server.yaml
 1131  kubectl get clusterrole
 1132  kubectl get clusterroles
 1133  kubectl get clusterroles --all-namespaces
 1134  sudo vim fluentd-server.yaml
 1135  kubectl create -f fluentd-server.yaml -n loggin
 1136  kubectl create -f fluentd-server.yaml -n logging
 1137  kubectl get pod,svc,ep -n logging
 1138  kubectl get pod,svc,ep -n logging -o wide
 1139  kubectl logs -f po/fluentd-7r94x -n logging
 1140  kubectl describe po/fluentd-7r94x -n logging
 1141  kubectl logs -f po/fluentd-hdst7 -n logging
 1142  kubectl get pod,svc,ep -n logging -o wide
 1143  kubectl describepo/fluentd-hdst7 -n logging
 1144  kubectl describe po/fluentd-hdst7 -n logging
 1145  kubectl describe po/fluentd-hdst7 -n logging  | less
 1146  kubectl get pod,svc,ep -n logging -o wide
 1147  kubectl describe node awsnlkub036.amwaternp.net | less
 1148  df -h
 1149  kubectl describe node awsnlkub036.amwaternp.net | less
 1150  kubectl describe node awsnlkub035.amwaternp.net | less
 1151  kubectl describe node awsnlkub036.amwaternp.net | less
 1152  sudo vim fluentd-server.yaml
 1153  df -h
 1154  df -hi
 1155  docker info
 1156  susdo docker info
 1157  sudo docker info
 1158  ls
 1159  ls -la
 1160  less fluentd-bit-client.yaml
 1161  less fluentd-server.yaml
 1162  sudo vim fluentd-bit-client.yaml
 1163  kubectl create -f fluentd-bit-client.yaml -n logging
 1164  kubectl get pod,svc,ep -n logging -o wide
 1165  cd ../kibana/
 1166  ls -la
 1167  less kibana-cm.yaml
 1168  df -h
 1169  kubectl get pod,svc,ep -n logging -o wide
 1170  kubectl delete -f elastic-statefulset.yaml -n logging
 1171  sudo  rm -fr  /tmp/elk-data/nodes/
 1172  df -h
 1173  sudo mkdir /backups/elk-data
 1174  sudo  chown 1000:1000 /backups/elk-data/
 1175  sudo vim ../elasticsearch/elastic-statefulset.yaml
 1176  kubectl describe node awsnlkub036.amwaternp.net | less
 1177  kubectl create -f ../elasticsearch/elastic-statefulset.yaml -n logging
 1178  kubectl get pod,svc,ep -n logging -o wide
 1179  ls -la /tmp/elk-data/nodes
 1180  ls -la /tmp/elk-dat
 1181  ls -la /tmp/elk-data
 1182  kubectl delete -f ../elasticsearch/elastic-statefulset.yaml -n logging
 1183  kubectl create -f ../elasticsearch/elastic-statefulset.yaml -n logging
 1184  kubectl get pod,svc,ep -n logging -o wide
 1185  kubectl logs -f po/elasticsearch-0 -n logging
 1186  sudo ls -la /backups/elk-data
 1187  sudo  chown -R 1000:1000 /backups/elk-data/
 1188  sudo ls -la /backups/elk-data
 1189  d -h
 1190  df -h
 1191  ls -la /spidermanefs
 1192  sudo  mkdir /spidermanefs/elk-data
 1193  sudo  chown -R 1000:1000 /spidermanefs/elk-data
 1194  ls -la /spidermanefs/elk-data
 1195  kubectl delete -f ../elasticsearch/elastic-statefulset.yaml -n logging
 1196  sudo vim ../elasticsearch/elastic-statefulset.yaml
 1197  kubectl create -f ../elasticsearch/elastic-statefulset.yaml -n logging
 1198  kubectl get pod,svc,ep -n logging -o wide
 1199  kubectl logs -f po/elasticsearch-0 -n logging
 1200  kubectl get pod,svc,ep -n logging -o wide
 1201  ls
 1202  less kibana-cm.yaml
 1203  less ../fluentd/fluentd-bit-client.yaml
 1204  kubectl delete -f ../fluentd/fluentd-server.yaml
 1205  kubectl delete -f ../fluentd/fluentd-server.yaml  -n logging
 1206  vim kibana-cm.yaml
 1207  sudo  vim kibana-cm.yaml
 1208  ls -al
 1209  cat kibana-cm.yaml
 1210  sudo vim kibana-deployment.yaml
 1211  curl -kv 192.168.119.255:9200
 1212  kubectl get pod,svc,ep -n logging -o wide
 1213  curl -kv 192.168.119.195:9200
 1214  sudo vim kibana-deployment.yaml
 1215  kubectl create -f kibana-cm.yaml
 1216  kubectl create -f kibana-cm.yaml -n logging
 1217  kubectl create -f kibana-deployment.yaml -n logging
 1218  less kibana-svc.yaml
 1219  kubectl create -f kibana-svc.yaml -n logging
 1220  kubectl get pod,svc,ep -n logging -o wide
 1221  curl -kv 192.168.119.195:9200
 1222  curl  192.168.119.195:9200/_cat/indices
 1223  kubectl logs -f po/elasticsearch-0 -n logging
 1224  df -h
 1225  kubectl get pod,svc,ep -n logging -o wide
 1226  kubectl describe node awsnlkub036.amwaternp.net | less
 1227  kubectl logs -f po/elasticsearch-0 -n logging
 1228  curl  192.168.119.195:9200/_cat/indices
 1229  curl  192.168.119.195:9200/_cluster/health
 1230  curl  192.168.119.195:9200/_cluster/health?pretty
 1231  kubectl logs --tail=10 -f po/elasticsearch-0 -n logging
 1232  curl  192.168.119.195:9200/_cluster/health?pretty
 1233  curl  192.168.119.195:9200/_cat/indices
 1234  cd ../elasticsearch/
 1235  ls
 1236  sudo vim elastic-curator.yaml
 1237  sudo vim elastic-curator-configmap.yaml
 1238  kubectl create -f elastic-curator-configmap.yaml -n logging
 1239  sudo vim elastic-curator.yaml
 1240  kubectl create -f elastic-curator.yaml -n logging
 1241  kubectl get pod,svc,ep -n logging -o wide
 1242  kubectl get cronjob -n logging -o wide
 1243  kubectl get job -n logging -o wide
 1244  kubectl get cronjob -n logging -o wide
 1245  kubectl get pod,svc,ep -n logging -o wide
 1246  kubectl get cronjob -n logging -o wide
 1247  kubectl describe cronjob -n logging
 1248  curl  192.168.119.195:9200/_cat/indices
 1249  curl  192.168.119.195:9200/_cat/indices| awk '{print $3}'
 1250  curl  192.168.119.195:9200/_cat/indices| awk '$3 ~ /logstash-2018.10/ {print $3}'
 1251  curl  192.168.119.195:9200/_cat/indices| awk '$3 ~ /logstash-2018.09/ {print $3}'
 1252  kubectl describe cronjob -n logging
 1253  curl  192.168.119.195:9200/_cat/indices| awk '$3 ~ /logstash-2018.09/ {print $3}'
 1254  curl -s 192.168.119.195:9200/_cat/indices| awk '$3 ~ /logstash-2018.09/ {print $3}'
 1255  for i in $(curl -s 192.168.119.195:9200/_cat/indices| awk '$3 ~ /logstash-2018.09/ {print $3}') do curl -X DELETE 192.168.119.195:9200/$i; done
 1256  for i in $(curl -s 192.168.119.195:9200/_cat/indices| awk '$3 ~ /logstash-2018.09/ {print $3}'); do curl -X DELETE 192.168.119.195:9200/$i; done
 1257  curl  192.168.119.195:9200/_cluster/health?pretty
 1258  curl -kv 192.168.119.195:9200/_cat/indices
 1259  curl 192.168.119.195:9200/_cat/indices
 1260  kubectl describe cronjob -n logging
 1261  sudo vim elastic-curator.yaml
 1262  kubectl delete -f elastic-curator.yaml -n logging
 1263  kubectl create -f elastic-curator.yaml -n logging
 1264  kubectl describe cronjob -n logging
 1265  kubectl get cronjob -n logging -o wide
 1266  curl 192.168.119.195:9200/_cat/indices
 1267  curl -X DELETE 192.168.119.195:9200/.kibana
 1268  curl 192.168.119.195:9200/_cat/indices
 1269  curl -X DELETE 192.168.119.195:9200/logstash-2018.10.26
 1270  date
 1271  curl 192.168.119.195:9200/_cat/indices
 1272  cd ..
 1273  ls
 1274  cd ..
 1275  ls
 1276  cd ..
 1277  ls
 1278  cd new
 1279  ls
 1280  cd k8s-EFK-Stack/
 1281  ls
 1282  cd ..
 1283  ls
 1284  cd ..
 1285  ls
 1286  cd new/efk/
 1287  ls
 1288  cd kibana/
 1289  ls
 1290  kubectl create -f nginx-deploy.yml -n logging
 1291  kubectl create -f nginx-svc.yaml -n logging
 1292  kubectl get pods -n logging
 1293  kubectl get pods -n logging -o wide
 1294  curl -I http://192.168.119.208
 1295  while true;      do curl -I http://192.168.119.208; sleep 0.25; done
 1296  while true;      do curl -I http://192.168.119.208/mydemo.html; sleep 0.25; done
 1297  l
 1298  kubectl get pods -n logging -o wide
 1299  ls
 1300  less nginx-deploy.yml
 1301  kubectl logs -f nginx -n logging
 1302  kubectl describe pod nginx -n logging
 1303  kubectl describe pod nginx -n logging | less
 1304  kubectl get pods -n logging -o wide
 1305  kubectl logs -f fluent-bit-nr55q -n logging
 1306  sudo vim ../../../scripts/new2/kubernetes-efk/fluentd/fluentd-bit-client.yaml
 1307  kubectl delete -f ../../../scripts/new2/kubernetes-efk/fluentd/fluentd-bit-client.yaml -n logging
 1308  kubectl create -f ../../../scripts/new2/kubernetes-efk/fluentd/fluentd-bit-client.yaml -n logging
 1309  kubectl get pods -n logging -o wide
 1310  kubectl logs -f fluent-bit-2rf2r -n logging
 1311  while true;      do curl -I http://192.168.119.208/mydemo.html; sleep 0.25; done
 1312  kubectl logs -f fluent-bit-2rf2r -n logging
 1313  kubectl get pods -n logging -o wide
 1314  curl 192.168.119.195:9200/_cat/indices
 1315  while true;      do curl -I http://192.168.119.208/mydemo.html; sleep 0.25; done
 1316  kubectl logs -f fluent-bit-nr55q -n logging
 1317  kubectl get pods -n logging -o wide
 1318  kubectl logs -f fluent-bit-2rf2r -n logging
 1319  kubectl get pods -n logging -o wide
 1320  kubectl logs -f fluent-bit-2jgts -n logging
 1321  kubectl logs -f fluent-bit-2jgts -n logging | less
 1322  kubectl -n logging exec -ti fluent-bit-2jgts -- sh
 1323  kubectl get pods -n logging -o wide
 1324  kubectl -n logging exec -ti fluent-bit-2jgts -- bash
 1325  ls -la
 1326  kubectl logs -f fluent-bit-2jgts -n logging | less
 1327  kubectl logs -f fluent-bit-2jgts -n logging
 1328  date
 1329  kubectl -n logging exec -ti fluent-bit-2jgts -- bash
 1330  kubectl get pods -n logging -o wide
 1331  kubectl -n logging exec -ti nginx -- bash
 1332  while true;      do curl -I http://192.168.119.208/mydemo.html; sleep 0.25; done
 1333  kubectl logs -f fluent-bit-2jgts -n logging
 1334  curl 192.168.119.195:9200/_cat/indices
 1335  curl 192.168.119.195:9200/logstash-2018.10.27
 1336  curl 192.168.119.195:9200/logstash-2018.10.27/_Search
 1337  curl 192.168.119.195:9200/logstash-2018.10.27/_search
 1338  curl 192.168.119.195:9200/logstash-2018.10.27/_search?pretty
 1339  curl -X DELETE 192.168.119.195:9200/logstash-2018.10.27
 1340  curl 192.168.119.195:9200/_cat/indices
 1341  curl 192.168.119.195:9200/logstash-2018.10.27/_search?pretty
 1342  kubectl get pods -n logging -o wide
 1343  kubectl delete pod fluent-bit-2rf2r -n logging
 1344  kubectl get pods -n logging -o wide
 1345  kubectl logs -f fluent-bit-gb75v -n logging
 1346  while true;      do curl -I http://192.168.119.208/mydemo.html; sleep 0.25; done
 1347  kubectl logs -f fluent-bit-gb75v -n logging
 1348  kubectl get pods -n logging -o wide
 1349  curl 192.168.119.195:9200/logstash-2018.10.27/_search?pretty
 1350  kubectl get pods -n logging -o wide
 1351  kubectl delete pod fluent-bit-2jgts,fluent-bit-gb75v -n logging
 1352  kubectl delete pod fluent-bit-2jgts -n logging
 1353  kubectl delete pod fluent-bit-ssl8m -n logging
 1354  kubectl delete pod fluent-bit-xhjvv -n logging
 1355  kubectl delete pod fluent-bit-znkwt -n logging
 1356  kubectl get [ods
 1357  kubectl get pods -n logging -o wide
 1358  while true;      do curl -I http://192.168.119.208/index.html; sleep 0.25; done
 1359  kubectl logs -f nginx -n logging
 1360  sudo vim ../../../scripts/new2/kubernetes-efk/fluentd/fluentd-bit-client.yaml
 1361  sudo vim ../../../fluent-bit-config.yaml
 1362  sudo vim ../../../scripts/new2/kubernetes-efk/fluentd/fluentd-bit-client.yaml
 1363  cp nginx-* ../../../scripts/new2/kubernetes-efk/kibana/
 1364  sudo cp nginx-* ../../../scripts/new2/kubernetes-efk/kibana/
 1365  ls
 1366  cd ../../../scripts/new2/
 1367  ls
 1368  sudo git init
 1369  sudo git add kubernetes-efk
 1370  sudo git remote add origin https://github.com/infra-ops/test-play.git
 1371  git commit -m "changes"
 1372  sudo git commit -m "changes"
 1373  sudo git push -u origin master
 1374  git pull https://github.com/infra-ops/test-play.git
 1375  sudo git pull https://github.com/infra-ops/test-play.git
 1376  sudo git push -u origin master
 1377  history
 1378  history > t.txt
 1379  sudo history > t.txt
 1380  history
